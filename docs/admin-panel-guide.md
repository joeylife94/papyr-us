# 관리자 패널 가이드

## 관리자 패널 접근

### 접근 방법
1. 헤더 우측의 톱니바퀴(Settings) 아이콘 클릭
2. 관리자 비밀번호 입력: (별도로 안내된 관리자 비밀번호를 입력하세요)
3. 인증 완료 후 관리자 패널 접근

### 보안 기능
- 비밀번호 기반 접근 제어
- 세션 기반 인증 유지
- 무단 접근 방지

## 디렉토리 관리

### 디렉토리 생성
1. "새 디렉토리 생성" 버튼 클릭
2. 필수 정보 입력:
   - **디렉토리 이름**: 시스템에서 사용할 고유 이름 (영문, 숫자, 하이픈만 허용)
   - **표시 이름**: 사용자에게 보여질 이름 (한글 포함 가능)
   - **비밀번호**: 해당 디렉토리 접근용 비밀번호 (선택사항)
   - **순서**: 사이드바에서의 표시 순서

### 디렉토리 수정
1. 디렉토리 목록에서 "수정" 버튼 클릭
2. 원하는 정보 변경
3. "저장" 버튼으로 변경사항 적용

### 디렉토리 삭제
1. 디렉토리 목록에서 "삭제" 버튼 클릭
2. 확인 대화상자에서 삭제 확인
3. **주의**: 디렉토리 삭제 시 해당 디렉토리는 '휴지통'으로 이동하며, 내부 페이지들은 즉시 접근 불가능하게 됩니다. 영구 삭제는 휴지통에서 별도로 수행해야 합니다.

### 디렉토리 복원
1. 관리자 패널의 '휴지통' 메뉴로 이동
2. 복원할 디렉토리 선택 후 "복원" 버튼 클릭
3. 디렉토리와 내부 페이지들이 즉시 복구됩니다.

## 기본 디렉토리 구조

### 시스템 기본 디렉토리
1. **docs** (Documentation) - 프로젝트 문서
2. **ideas** (Ideas) - 아이디어 및 기획
3. **members** (Members) - 팀원 정보
4. **logs** (Logs) - 활동 로그
5. **archive** (Archive) - 보관 문서
6. **team1** (Team Alpha) - 알파 팀 작업공간
7. **team2** (Team Beta) - 베타 팀 작업공간

### 팀 디렉토리 특별 기능
- **팀 캘린더**: 팀별 전용 캘린더 시스템
- **페이지 생성**: 팀 전용 페이지 빠른 생성
- **협업 도구**: 팀원 간 문서 공유

## 디렉토리 접근 권한

### 공개 디렉토리
- 비밀번호가 설정되지 않은 디렉토리
- 모든 사용자가 자유롭게 접근 가능
- 기본적으로 대부분의 디렉토리가 공개

### 보호된 디렉토리
- 비밀번호가 설정된 디렉토리
- 올바른 비밀번호 입력 시에만 접근 가능
- 민감한 정보나 특정 팀 전용 자료에 적합

## 관리자 권한

### 전체 시스템 관리
- 모든 디렉토리 생성/수정/삭제
- 시스템 설정 변경
- 사용자 접근 권한 관리

### 데이터 관리
- 페이지 일괄 관리
- 백업 및 복원

---
### 2025-09-20 업데이트

오늘 코드베이스에서 진행된 보안 및 개발 작업 요약:

- 환경 변수 보강: `.env.example`에서 하드코딩된 시크릿을 제거하고, `JWT_SECRET`, `ADMIN_PASSWORD` 등 중요한 환경 변수를 명시적으로 요구하도록 문서화했습니다.
- 시작 시 환경 검증 추가: `server/env.ts`에 `validateEnv()`를 도입해 운영 환경에서 필수 환경 변수가 없으면 앱이 실패(fail-fast)하도록 변경했습니다. `FAIL_ON_MISSING_ENV` 플래그로 동작을 제어합니다.
- 데이터 저장소 분기: `server/config.ts`에 `useDatabase` 게터를 추가해 메모리 저장소(`MemStorage`)와 데이터베이스 저장소(`DBStorage`) 선택을 명확히 했습니다.
- 타입 안정성 향상: `IStorage` 인터페이스와 `DBStorage` 구현을 정렬했고, 메모리용 테스트 픽스처에 누락된 필드(`blocks`, `teamId`)를 보강해서 런타임/타입 오류를 예방했습니다.
- CI 준비: GitHub Actions 워크플로(타입 검사, 테스트, 빌드)를 추가해 원격에서의 자동 검증을 준비했습니다.

검증:

- 로컬에서 `npm run check`(타입스크립트 검사), `npm test`(유닛 테스트), `npm run build`(프로덕션 번들) 모두 성공했습니다.

다음 단계:

- 원격 CI(푸시/PR) 실행 및 결과 확인
- Playwright 기반 E2E를 CI에 추가하는 작업은 추후 진행 예정


### 디렉토리 명명 규칙
- **시스템 이름**: 영문 소문자, 숫자, 하이픈만 사용
- **표시 이름**: 직관적이고 명확한 한글/영문 이름
- **일관된 구조**: 비슷한 성격의 디렉토리는 유사한 패턴 사용

### 보안 관리
- 강력한 비밀번호 사용 (8자 이상, 특수문자 포함)
- 정기적인 비밀번호 변경
- 불필요한 접근 권한 최소화

### 디렉토리 구조 설계
- 논리적이고 직관적인 구조
- 적절한 깊이와 폭 유지
- 사용자 접근 패턴 고려

## 문제 해결

### 일반적인 문제
1. **비밀번호 분실**: 관리자가 재설정 필요
2. **디렉토리 접근 불가**: 권한 설정 확인
3. **삭제된 디렉토리 복구**: 백업에서 복원 필요

### 응급 상황 대처
- 관리자 패널 접근 불가 시 개발자 문의
- 중요 데이터 손실 시 즉시 백업 복원
- 시스템 오류 발생 시 로그 확인 및 재시작

## 향후 개선 계획
1. 역할 기반 접근 제어 (RBAC)
2. 디렉토리별 세부 권한 설정
3. 감사 로그 및 활동 추적
4. 자동 백업 시스템
5. 사용자 그룹 관리